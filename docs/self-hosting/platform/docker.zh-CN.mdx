---
title: é€šè¿‡ Docker éƒ¨ç½² LobeChat
description: å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Docker éƒ¨ç½² LobeChat æœåŠ¡ï¼ŒåŒ…æ‹¬å®‰è£… Docker å®¹å™¨ç¯å¢ƒå’Œä½¿ç”¨æŒ‡ä»¤ä¸€é”®å¯åŠ¨æœåŠ¡ã€‚è¯¦ç»†è¯´æ˜å¦‚ä½•é…ç½®ç¯å¢ƒå˜é‡å’Œä½¿ç”¨ä»£ç†åœ°å€ã€‚
tags:
  - Docker
  - LobeChat
  - éƒ¨ç½²æŒ‡å¼•
  - ç¯å¢ƒå˜é‡
  - ä»£ç†åœ°å€
  - è‡ªåŠ¨æ›´æ–°è„šæœ¬
---

# Docker éƒ¨ç½²æŒ‡å¼•

<div style={{display:"flex", gap: 4}}>
  [![][docker-release-shield]][docker-release-link]

  [![][docker-size-shield]][docker-size-link]

  [![][docker-pulls-shield]][docker-pulls-link]
</div>

æˆ‘ä»¬æä¾›äº† [Docker é•œåƒ][docker-release-link]ï¼Œä¾›ä½ åœ¨è‡ªå·±çš„ç§æœ‰è®¾å¤‡ä¸Šéƒ¨ç½² LobeChat æœåŠ¡ã€‚

## éƒ¨ç½²æŒ‡å—

<Steps>
  ### å®‰è£… Docker å®¹å™¨ç¯å¢ƒ

  ï¼ˆå¦‚æœå·²å®‰è£…ï¼Œè¯·è·³è¿‡æ­¤æ­¥ï¼‰

  <Tabs items={['Ubuntu', 'CentOS']}>
    <Tab>
      ```fish
      $ apt install docker.io
      ```
    </Tab>

    <Tab>
      ```fish
      $ yum install docker
      ```
    </Tab>
  </Tabs>

  ### Docker æŒ‡ä»¤éƒ¨ç½²

  ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯ä½¿ç”¨ä¸€é”®å¯åŠ¨ LobeChat æœåŠ¡ï¼š

  ```fish
  $ docker run -d -p 3210:3210 \
    -e OPENAI_API_KEY=sk-xxxx \
    -e ACCESS_CODE=lobe66 \
    --name lobe-chat \
    lobehub/lobe-chat
  ```

  æŒ‡ä»¤è¯´æ˜ï¼š

  - é»˜è®¤æ˜ å°„ç«¯å£ä¸º `3210`, è¯·ç¡®ä¿æœªè¢«å ç”¨æˆ–æ‰‹åŠ¨æ›´æ”¹ç«¯å£æ˜ å°„
  - ä½¿ç”¨ä½ çš„ OpenAI API Key æ›¿æ¢ä¸Šè¿°å‘½ä»¤ä¸­çš„ `sk-xxxx` ï¼Œè·å– API Key çš„æ–¹å¼è¯¦è§æœ€åä¸€èŠ‚ã€‚

  <Callout type={'tip'}>
    LobeChat æ”¯æŒçš„å®Œæ•´ç¯å¢ƒå˜é‡åˆ—è¡¨è¯·å‚è€ƒ [ğŸ“˜ ç¯å¢ƒå˜é‡](/zh/docs/self-hosting/environment-variables)
    éƒ¨åˆ†
  </Callout>

  <Callout>
    ç”±äºå®˜æ–¹çš„ Docker
    é•œåƒæ„å»ºå¤§çº¦éœ€è¦åŠå°æ—¶å·¦å³ï¼Œå¦‚æœåœ¨æ›´æ–°éƒ¨ç½²åä¼šå‡ºç°ã€Œå­˜åœ¨æ›´æ–°ã€çš„æç¤ºï¼Œå¯ä»¥ç­‰å¾…é•œåƒæ„å»ºå®Œæˆåå†æ¬¡éƒ¨ç½²ã€‚
  </Callout>

  <Callout type="warning">
    å®˜æ–¹ Docker é•œåƒä¸­æœªè®¾å®šå¯†ç ï¼Œå¼ºçƒˆå»ºè®®æ·»åŠ å¯†ç ä»¥æå‡å®‰å…¨æ€§ï¼Œå¦åˆ™ä½ å¯èƒ½ä¼šé‡åˆ° [My API Key was
    stolen!!!](https://github.com/lobehub/lobe-chat/issues/1123) è¿™æ ·çš„æƒ…å†µ
  </Callout>

  <Callout type="important">
    æ³¨æ„ï¼Œå½“**éƒ¨ç½²æ¶æ„ä¸é•œåƒçš„ä¸ä¸€è‡´æ—¶**ï¼Œéœ€è¦å¯¹ **Sharp** è¿›è¡Œäº¤å‰ç¼–è¯‘ï¼Œè¯¦è§ [Sharp
    äº¤å‰ç¼–è¯‘](https://sharp.pixelplumbing.com/install#cross-platform)
  </Callout>

  #### ä½¿ç”¨ä»£ç†åœ°å€

  å¦‚æœä½ éœ€è¦é€šè¿‡ä»£ç†ä½¿ç”¨ OpenAI æœåŠ¡ï¼Œä½ å¯ä»¥ä½¿ç”¨ `OPENAI_PROXY_URL` ç¯å¢ƒå˜é‡æ¥é…ç½®ä»£ç†åœ°å€ï¼š

  ```fish
  $ docker run -d -p 3210:3210 \
    -e OPENAI_API_KEY=sk-xxxx \
    -e OPENAI_PROXY_URL=https://api-proxy.com/v1 \
    -e ACCESS_CODE=lobe66 \
    --name lobe-chat \
    lobehub/lobe-chat
  ```

  ### Crontab è‡ªåŠ¨æ›´æ–°è„šæœ¬ï¼ˆå¯é€‰ï¼‰

  å¦‚æœä½ æƒ³è‡ªåŠ¨è·å¾—æœ€æ–°çš„é•œåƒï¼Œä½ å¯ä»¥å¦‚ä¸‹æ“ä½œã€‚

  é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ª `lobe.env` é…ç½®æ–‡ä»¶ï¼Œå†…å®¹ä¸ºå„ç§ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ï¼š

  ```env
  OPENAI_API_KEY=sk-xxxx
  OPENAI_PROXY_URL=https://api-proxy.com/v1
  ACCESS_CODE=arthals2333
  OPENAI_MODEL_LIST=-gpt-4,-gpt-4-32k,-gpt-3.5-turbo-16k,gpt-3.5-turbo-1106=gpt-3.5-turbo-16k,gpt-4-0125-preview=gpt-4-turbo,gpt-4-vision-preview=gpt-4-vision
  ```

  ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬æ¥è‡ªåŠ¨æ›´æ–°ï¼š

  ```bash
  #!/bin/bash
  # auto-update-lobe-chat.sh

  # è®¾ç½®ä»£ç†ï¼ˆå¯é€‰ï¼‰
  export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890

  # æ‹‰å–æœ€æ–°çš„é•œåƒå¹¶å°†è¾“å‡ºå­˜å‚¨åœ¨å˜é‡ä¸­
  output=$(docker pull lobehub/lobe-chat:latest 2>&1)

  # æ£€æŸ¥æ‹‰å–å‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œ
  if [ $? -ne 0 ]; then
    exit 1
  fi

  # æ£€æŸ¥è¾“å‡ºä¸­æ˜¯å¦åŒ…å«ç‰¹å®šçš„å­—ç¬¦ä¸²
  echo "$output" | grep -q "Image is up to date for lobehub/lobe-chat:latest"

  # å¦‚æœé•œåƒå·²ç»æ˜¯æœ€æ–°çš„ï¼Œåˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œ
  if [ $? -eq 0 ]; then
    exit 0
  fi

  echo "Detected Lobe-Chat update"

  # åˆ é™¤æ—§çš„å®¹å™¨
  echo "Removed: $(docker rm -f Lobe-Chat)"

  # è¿è¡Œæ–°çš„å®¹å™¨
  echo "Started: $(docker run -d --network=host --env-file /path/to/lobe.env --name=Lobe-Chat --restart=always lobehub/lobe-chat)"

  # æ‰“å°æ›´æ–°çš„æ—¶é—´å’Œç‰ˆæœ¬
  echo "Update time: $(date)"
  echo "Version: $(docker inspect lobehub/lobe-chat:latest | grep 'org.opencontainers.image.version' | awk -F'"' '{print $4}')"

  # æ¸…ç†ä¸å†ä½¿ç”¨çš„é•œåƒ
  docker images | grep 'lobehub/lobe-chat' | grep -v 'lobehub/lobe-chat-database' | grep -v 'latest' | awk '{print $3}' | xargs -r docker rmi > /dev/null 2>&1
  echo "Removed old images."
  ```

  æ­¤è„šæœ¬å¯ä»¥åœ¨ Crontab ä¸­ä½¿ç”¨ï¼Œä½†è¯·ç¡®è®¤ä½ çš„ Crontab å¯ä»¥æ‰¾åˆ°æ­£ç¡®çš„ Docker å‘½ä»¤ã€‚å»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚

  é…ç½® Crontabï¼Œæ¯ 5 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡è„šæœ¬ï¼š

  ```bash
  */5 * * * * /path/to/auto-update-lobe-chat.sh >> /path/to/auto-update-lobe-chat.log 2>&1
  ```
</Steps>

## è·å– OpenAI API Key

API Key æ˜¯ä½¿ç”¨ LobeChat è¿›è¡Œå¤§è¯­è¨€æ¨¡å‹ä¼šè¯çš„å¿…è¦ä¿¡æ¯ï¼Œæœ¬èŠ‚ä»¥ OpenAI æ¨¡å‹æœåŠ¡å•†ä¸ºä¾‹ï¼Œç®€è¦ä»‹ç»è·å– API Key çš„æ–¹å¼ã€‚

### `A` é€šè¿‡ OpenAI å®˜æ–¹æ¸ é“

- æ³¨å†Œä¸€ä¸ª [OpenAI è´¦æˆ·](https://platform.openai.com/signup)ï¼Œä½ éœ€è¦ä½¿ç”¨å›½é™…æ‰‹æœºå·ã€éå¤§é™†é‚®ç®±è¿›è¡Œæ³¨å†Œï¼›
- æ³¨å†Œå®Œæ¯•åï¼Œå‰å¾€ [API Keys](https://platform.openai.com/api-keys) é¡µé¢ï¼Œç‚¹å‡» `Create new secret key` åˆ›å»ºæ–°çš„ API Key:

<Steps>
  #### æ­¥éª¤ 1ï¼šæ‰“å¼€åˆ›å»ºçª—å£

  <Image alt={'æ‰“å¼€åˆ›å»ºçª—å£'} height={600} src="https://github-production-user-asset-6210df.s3.amazonaws.com/28616219/296253192-ff2193dd-f125-4e58-82e8-91bc376c0d68.png" />

  #### æ­¥éª¤ 2ï¼šåˆ›å»º API Key

  <Image alt={'åˆ›å»º API Key'} height={600} src="https://github-production-user-asset-6210df.s3.amazonaws.com/28616219/296254170-803bacf0-4471-4171-ae79-0eab08d621d1.png" />

  #### æ­¥éª¤ 3ï¼šè·å– API Key

  <Image alt={'è·å– API Key'} height={600} src="https://github-production-user-asset-6210df.s3.amazonaws.com/28616219/296255167-f2745f2b-f083-4ba8-bc78-9b558e0002de.png" />
</Steps>

å°†æ­¤ API Key å¡«å†™åˆ° LobeChat çš„ API Key é…ç½®ä¸­ï¼Œå³å¯å¼€å§‹ä½¿ç”¨ã€‚

<Callout type={'tip'}>
  è´¦æˆ·æ³¨å†Œåï¼Œä¸€èˆ¬æœ‰ 5 ç¾å…ƒçš„å…è´¹é¢åº¦ï¼Œä½†æœ‰æ•ˆæœŸåªæœ‰ä¸‰ä¸ªæœˆã€‚å¦‚æœä½ å¸Œæœ›é•¿æœŸä½¿ç”¨ä½ çš„ API
  Keyï¼Œä½ éœ€è¦å®Œæˆæ”¯ä»˜çš„ä¿¡ç”¨å¡ç»‘å®šã€‚ç”±äº OpenAI
  åªæ”¯æŒå¤–å¸ä¿¡ç”¨å¡ï¼Œå› æ­¤ä½ éœ€è¦æ‰¾åˆ°åˆé€‚çš„æ”¯ä»˜æ¸ é“ï¼Œæ­¤å¤„ä¸å†è¯¦ç»†å±•å¼€ã€‚
</Callout>

### `B` é€šè¿‡ OpenAI ç¬¬ä¸‰æ–¹ä»£ç†å•†

å¦‚æœä½ å‘ç°æ³¨å†Œ OpenAI è´¦æˆ·æˆ–è€…ç»‘å®šå¤–å¸ä¿¡ç”¨å¡æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥è€ƒè™‘å€ŸåŠ©ä¸€äº›çŸ¥åçš„ OpenAI ç¬¬ä¸‰æ–¹ä»£ç†å•†æ¥è·å– API Keyï¼Œè¿™å¯ä»¥æœ‰æ•ˆé™ä½è·å– OpenAI API Key çš„é—¨æ§›ã€‚ä½†ä¸æ­¤åŒæ—¶ï¼Œä¸€æ—¦ä½¿ç”¨ä¸‰æ–¹æœåŠ¡ï¼Œä½ å¯èƒ½ä¹Ÿéœ€è¦æ‰¿æ‹…æ½œåœ¨çš„é£é™©ï¼Œè¯·æ ¹æ®ä½ è‡ªå·±çš„å®é™…æƒ…å†µè‡ªè¡Œå†³ç­–ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„ç¬¬ä¸‰æ–¹æ¨¡å‹ä»£ç†å•†åˆ—è¡¨ï¼Œä¾›ä½ å‚è€ƒï¼š

| Logo                                                                                                                                              | æœåŠ¡å•†          | ç‰¹æ€§è¯´æ˜                                                     | Proxy ä»£ç†åœ°å€                | é“¾æ¥                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ | -------------------------------------------------------- | ------------------------- | ----------------------------- |
| <img src="https://github-production-user-asset-6210df.s3.amazonaws.com/17870709/296272721-c3ac0bf3-e433-4496-89c4-ebdc20689c17.jpg" width="40" /> | **AiHubMix** | ä½¿ç”¨ OpenAI ä¼ä¸šæ¥å£ï¼Œå…¨ç«™æ¨¡å‹ä»·æ ¼ä¸ºå®˜æ–¹ **86 æŠ˜**ï¼ˆå« GPT-4 ã€Cluade 3.5 ç­‰ï¼‰ | `https://aihubmix.com/v1` | [è·å–](https://lobe.li/CnsM6fH) |

<Callout type={'warning'}>
  **å…è´£ç”³æ˜**: åœ¨æ­¤æ¨èçš„ OpenAI API Key ç”±ç¬¬ä¸‰æ–¹ä»£ç†å•†æä¾›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¯¹ API Key çš„ **æœ‰æ•ˆæ€§** å’Œ
  **å®‰å…¨æ€§** è´Ÿè´£ï¼Œè¯·ä½ è‡ªè¡Œæ‰¿æ‹…è´­ä¹°å’Œä½¿ç”¨ API Key çš„é£é™©ã€‚
</Callout>

[docker-pulls-link]: https://hub.docker.com/r/lobehub/lobe-chat
[docker-pulls-shield]: https://img.shields.io/docker/pulls/lobehub/lobe-chat?color=45cc11&labelColor=black&style=flat-square
[docker-release-link]: https://hub.docker.com/r/lobehub/lobe-chat
[docker-release-shield]: https://img.shields.io/docker/v/lobehub/lobe-chat?color=369eff&label=docker&labelColor=black&logo=docker&logoColor=white&style=flat-square&sort=semver
[docker-size-link]: https://hub.docker.com/r/lobehub/lobe-chat
[docker-size-shield]: https://img.shields.io/docker/image-size/lobehub/lobe-chat?color=369eff&labelColor=black&style=flat-square&sort=semver
