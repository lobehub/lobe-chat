---
title: åœ¨ LobeChat ä¸­é…ç½® Authelia èº«ä»½éªŒè¯æœåŠ¡
description: å­¦ä¹ å¦‚ä½•åœ¨ LobeChat ä¸­é…ç½® Authelia èº«ä»½éªŒè¯æœåŠ¡ï¼ŒåŒ…æ‹¬åˆ›å»ºæä¾›ç¨‹åºã€é…ç½®ç¯å¢ƒå˜é‡å’Œéƒ¨ç½² LobeChatã€‚è¯¦ç»†æ­¥éª¤å’Œå¿…è¦ç¯å¢ƒå˜é‡è®¾ç½®ã€‚
tags:
  - Authelia
  - èº«ä»½éªŒè¯
  - å•ç‚¹ç™»å½•
  - ç¯å¢ƒå˜é‡
  - LobeChat
---

# é…ç½® Authelia èº«ä»½éªŒè¯æœåŠ¡

## Authelia é…ç½®æµç¨‹

<Steps>
### åˆ›å»º Authelia æä¾›åº”ç”¨

æˆ‘ä»¬ç°åœ¨é»˜è®¤æ‚¨å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Autheliaã€‚å‡è®¾æ‚¨çš„ LobeChat å®ä¾‹éƒ¨ç½²åœ¨ `https://lobe.example.com/` ä¸­ã€‚
æ³¨æ„ï¼Œç›®å‰åªæœ‰ `localhost` æ”¯æŒ HTTP è®¿é—®ï¼Œå…¶ä»–åŸŸåéœ€è¦å¯ç”¨ TLSï¼Œå¦åˆ™ Authelia é»˜è®¤å°†ä¸»åŠ¨ä¸­æ–­èº«ä»½è®¤è¯ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬æ‰“å¼€ Authelia å®ä¾‹çš„é…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼š

åœ¨ `identity_providers`-> `oidc` ä¸‹æ–°å¢ä¸€ä¸ª `lobe-chat` çš„é¡¹ç›®ï¼š

```yaml
...
identity_providers:
  oidc:
    ...
    ## The other portions of the mandatory OpenID Connect 1.0 configuration go here.
    ## See: https://www.authelia.com/c/oidc
    - id: lobe-chat
      description: LobeChat
      secret: '$pbkdf2-sha512$310000$c8p78n7pUMln0jzvd4aK4Q$JNRBzwAo0ek5qKn50cFzzvE9RXV88h1wJn5KGiHrD0YKtZaR/nCb2CJPOsKaPK0hjf.9yHxzQGZziziccp6Yng'  # The digest of 'insecure_secret'.
      public: false
      authorization_policy: two_factor
      redirect_uris:
        - https://chat.example.com/api/auth/callback/authelia
      scopes:
        - openid
        - profile
        - email
      userinfo_signing_algorithm: none
```

è¯·æ‚¨ç¡®ä¿ `secret` å’Œ `redirect_urls` æ›¿æ¢æˆæ‚¨è‡ªå·±çš„å€¼ã€‚
æ³¨æ„ï¼Authelia ä¸­é…ç½® `secret` æ˜¯å¯†æ–‡ï¼Œå³åŠ ç›å“ˆå¸Œå€¼ã€‚å…¶å¯¹åº”çš„æ˜æ–‡ç¨åéœ€è¦å¡«å†™åœ¨ lobeChat ä¸­ã€‚

ä¿å­˜é…ç½®æ–‡ä»¶ï¼Œç„¶åé‡å¯ Authelia æœåŠ¡ã€‚ç°åœ¨æˆ‘ä»¬å®Œæˆäº† Authelia çš„é…ç½®å·¥ä½œã€‚

### é…ç½®ç¯å¢ƒå˜é‡

åœ¨éƒ¨ç½² LobeChat æ—¶ï¼Œä½ éœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| ç¯å¢ƒå˜é‡ | ç±»å‹ | æè¿° |
| --- | --- | --- |
| `NEXT_AUTH_SECRET` | å¿…é€‰ | ç”¨äºåŠ å¯† Auth.js ä¼šè¯ä»¤ç‰Œçš„å¯†é’¥ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆç§˜é’¥ï¼š `openssl rand -base64 32` |
| `NEXT_AUTH_SSO_PROVIDERS` | å¿…é€‰ | é€‰æ‹© LoboChat çš„å•ç‚¹ç™»å½•æä¾›å•†ã€‚ä½¿ç”¨ Authelia è¯·å¡«å†™ `authelia`ã€‚ |
| `AUTHELIA_CLIENT_ID` | å¿…é€‰ | åˆšåˆšåœ¨ Authelia é…ç½®çš„ `id`ï¼Œç¤ºä¾‹å€¼æ˜¯ `lobe-chat` |
| `AUTHELIA_CLIENT_SECRET` | å¿…é€‰ | åˆšåˆšåœ¨ Authelia é…ç½®çš„ `secret` å¯¹åº”çš„æ˜æ–‡ï¼Œç¤ºä¾‹å€¼æ˜¯ `insecure_secret` |
| `AUTHELIA_ISSUER` | å¿…é€‰ |æ‚¨çš„ Authelia çš„ç½‘å€ï¼Œä¾‹å¦‚ `https://sso.example.com` |
| `NEXTAUTH_URL` | å¯é€‰ | è¯¥ URL ç”¨äºæŒ‡å®š Auth.js åœ¨æ‰§è¡Œ OAuth éªŒè¯æ—¶çš„å›è°ƒåœ°å€ï¼Œå½“é»˜è®¤ç”Ÿæˆçš„é‡å®šå‘åœ°å€å‘ç”Ÿä¸æ­£ç¡®æ—¶æ‰éœ€è¦è®¾ç½®ã€‚`https://chat.example.com/api/auth` |

  <Callout type={'tip'}>
    å‰å¾€ [ğŸ“˜ ç¯å¢ƒå˜é‡](/zh/docs/self-hosting/environment-variable#Authelia) å¯æŸ¥é˜…ç›¸å…³å˜é‡è¯¦æƒ…ã€‚

</Callout>
</Steps>

<Callout type={'info'}>
  éƒ¨ç½²æˆåŠŸåï¼Œç”¨æˆ·å°†å¯ä»¥ä½¿ç”¨ Authelia ä¸­é…ç½®çš„ç”¨æˆ·é€šè¿‡èº«ä»½è®¤è¯å¹¶ä½¿ç”¨ LobeChatã€‚
</Callout>
