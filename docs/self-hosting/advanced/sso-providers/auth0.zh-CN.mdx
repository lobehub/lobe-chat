import { Callout, Steps } from 'nextra/components';

# é…ç½® Auth0 èº«ä»½éªŒè¯æœåŠ¡

<Steps>
  ### åˆ›å»º Auth0 åº”ç”¨

  æ³¨å†Œå¹¶ç™»å½• [Auth0][auth0-client-page]ï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ã€ŒApplicationsã€ï¼Œåˆ‡æ¢åˆ°åº”ç”¨ç®¡ç†ç•Œé¢ï¼Œç‚¹å‡»å³ä¸Šè§’ã€ŒCreate Applicationã€ä»¥åˆ›å»ºåº”ç”¨ã€‚

  ![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/1b405347-f4c3-4c55-82f6-47116f2210d0)

  å¡«å†™ä½ æƒ³å‘ç»„ç»‡ç”¨æˆ·æ˜¾ç¤ºçš„åº”ç”¨åç§°ï¼Œå¯é€‰æ‹©ä»»æ„åº”ç”¨ç±»å‹ï¼Œç‚¹å‡»ã€ŒCreateã€ã€‚

  ![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/75c92f85-3ad3-4473-a9c6-e667e28d428d)

  åˆ›å»ºæˆåŠŸåï¼Œç‚¹å‡»ç›¸åº”çš„åº”ç”¨ï¼Œè¿›å…¥åº”ç”¨è¯¦æƒ…é¡µï¼Œåˆ‡æ¢åˆ°ã€ŒSettingsã€æ ‡ç­¾é¡µï¼Œå°±å¯ä»¥çœ‹åˆ°ç›¸åº”çš„é…ç½®ä¿¡æ¯

  ![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/a1ed996b-95ef-4b7d-a50d-b4666eccfecb)

  åœ¨åº”ç”¨é…ç½®é¡µé¢ä¸­ï¼Œè¿˜éœ€è¦é…ç½® Allowed Callback URLsï¼Œåœ¨æ­¤å¤„å¡«å†™:

  ```bash
  http(s)://your-domain/api/auth/callback/auth0
  ```

  ![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/575f46aa-f485-49bd-8b90-dbb1ce1a5c1b)

  <Callout type={'info'}>
    å¯ä»¥åœ¨éƒ¨ç½²åå†å¡«å†™æˆ–ä¿®æ”¹ Allowed Callback URLsï¼Œä½†æ˜¯åŠ¡å¿…ä¿è¯å¡«å†™çš„ URL ä¸éƒ¨ç½²çš„ URL ä¸€è‡´
  </Callout>

  ### æ–°å¢ç”¨æˆ·

  ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ã€ŒUsers Managementã€ï¼Œè¿›å…¥ç”¨æˆ·ç®¡ç†ç•Œé¢ï¼Œå¯ä»¥ä¸ºä½ çš„ç»„ç»‡æ–°å»ºç”¨æˆ·ï¼Œç”¨ä»¥ç™»å½• LobeChat

  ![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/3b8127ab-dc4f-4ff9-a4cb-dec3ef0295cc)

  ### é…ç½®ç¯å¢ƒå˜é‡

  åœ¨éƒ¨ç½² LobeChat æ—¶ï¼Œä½ éœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

  | ç¯å¢ƒå˜é‡                  | ç±»å‹ | æè¿°                                                                                          |
  | --------------------- | -- | ------------------------------------------------------------------------------------------- |
  | `ENABLE_OAUTH_SSO`    | å¿…é€‰ | ä¸º LobeChat å¯ç”¨å•ç‚¹ç™»å½• (SSO)ã€‚è®¾ç½®ä¸º `1` ä»¥å¯ç”¨å•ç‚¹ç™»å½•ã€‚                                                    |
  | `NEXTAUTH_SECRET`     | å¿…é€‰ | ç”¨äºåŠ å¯† Auth.js ä¼šè¯ä»¤ç‰Œçš„å¯†é’¥ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆç§˜é’¥ï¼š `openssl rand -base64 32`                               |
  | `SSO_PROVIDERS`       | å¿…é€‰ | é€‰æ‹© LoboChat çš„å•ç‚¹ç™»å½•æä¾›å•†ã€‚ä½¿ç”¨ Auth0 è¯·å¡«å†™ `auth0`ã€‚                                                  |
  | `AUTH0_CLIENT_ID`     | å¿…é€‰ | Auth0 åº”ç”¨ç¨‹åºçš„ Client ID                                                                       |
  | `AUTH0_CLIENT_SECRET` | å¿…é€‰ | Auth0 åº”ç”¨ç¨‹åºçš„ Client Secret                                                                   |
  | `AUTH0_ISSUER`        | å¿…é€‰ | Auth0 åº”ç”¨ç¨‹åºçš„ Domainï¼Œ`https://example.auth0.com`                                              |
  | `ACCESS_CODE`         | å¿…é€‰ | æ·»åŠ è®¿é—®æ­¤æœåŠ¡çš„å¯†ç ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªè¶³å¤Ÿé•¿çš„éšæœºå¯†ç ä»¥ â€œç¦ç”¨â€ è®¿é—®ç æˆæƒ                                                      |
  | `NEXTAUTH_URL`        | å¯é€‰ | è¯¥ URL ç”¨äºæŒ‡å®š Auth.js åœ¨æ‰§è¡Œ OAuth éªŒè¯æ—¶çš„å›è°ƒåœ°å€ï¼Œå½“é»˜è®¤ç”Ÿæˆçš„é‡å®šå‘åœ°å€å‘ç”Ÿä¸æ­£ç¡®æ—¶æ‰éœ€è¦è®¾ç½®ã€‚`https://example.com/api/auth` |

  <Callout type={'info'}> å‰å¾€ [ğŸ“˜ ç¯å¢ƒå˜é‡](/zh/self-hosting/environment-variable#auth0) å¯æŸ¥é˜…ç›¸å…³å˜é‡è¯¦æƒ…ã€‚</Callout>
</Steps>

<Callout type={'info'}>éƒ¨ç½²æˆåŠŸåï¼Œç”¨æˆ·å°†å¯ä»¥ä½¿ç”¨ Auth0 ä¸­é…ç½®çš„ç”¨æˆ·é€šè¿‡èº«ä»½è®¤è¯å¹¶ä½¿ç”¨ LobeChatã€‚</Callout>

## è¿›é˜¶é…ç½®

### è¿æ¥ç°æœ‰çš„å•ç‚¹ç™»å½•æœåŠ¡

å¦‚æœä½ çš„ä¼ä¸šæˆ–ç»„ç»‡å·²æœ‰ç°æœ‰çš„ç»Ÿä¸€èº«ä»½è®¤è¯è®¾æ–½ï¼Œå¯åœ¨ Applications -> SSO Integrations ä¸­ï¼Œè¿æ¥ç°æœ‰çš„å•ç‚¹ç™»å½•æœåŠ¡ã€‚

Auth0 æ”¯æŒ Azure Active Directory / Slack / Google Workspace / Office 365 / Zoom ç­‰å•ç‚¹ç™»å½•æœåŠ¡ï¼Œè¯¦ç»†æ”¯æŒåˆ—è¡¨å¯å‚è€ƒ [è¿™é‡Œ][auth0-sso-integrations]

![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/32650f4f-d0b0-4843-b26d-d35bad11d8a3)

### é…ç½®ç¤¾äº¤ç™»å½•

å¦‚æœä½ çš„ä¼ä¸šæˆ–ç»„ç»‡éœ€è¦æ”¯æŒå¤–éƒ¨äººå‘˜ç™»å½•ï¼Œå¯ä»¥åœ¨ Authentication -> Social ä¸­ï¼Œé…ç½®ç¤¾äº¤ç™»å½•æœåŠ¡ã€‚

![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/7b6f6a6c-2686-49d8-9dbd-0516053f1efa)

<Callout type={'warning'}>
  é…ç½®ç¤¾äº¤ç™»å½•æœåŠ¡é»˜è®¤ä¼šå…è®¸æ‰€æœ‰äººé€šè¿‡è®¤è¯ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ LobeChat è¢«å¤–éƒ¨äººå‘˜æ»¥ç”¨ã€‚
</Callout>

<Callout>
  å¦‚æœä½ éœ€è¦é™åˆ¶ç™»å½•äººå‘˜ï¼ŒåŠ¡å¿…é…ç½® **é˜»æ­¢ç­–ç•¥**ï¼š è¯·åœ¨æ‰“å¼€ç¤¾äº¤ç™»å½•é€‰é¡¹åï¼Œå‚è€ƒ
  [è¿™ç¯‡æ–‡ç« ][auth0-login-actions-manual] åˆ›å»º Action æ¥è®¾ç½®é˜»æ­¢ / å…è®¸åˆ—è¡¨ã€‚
</Callout>

[auth0-client-page]: https://manage.auth0.com/dashboard
[auth0-login-actions-manual]: https://auth0.com/blog/permit-or-deny-login-requests-using-auth0-actions/
[auth0-sso-integrations]: https://marketplace.auth0.com/features/sso-integrations
