# å·¥å…·è°ƒç”¨ Tools Calling

Tool Calling æ˜¯å¤§è¯­è¨€æ¨¡å‹çš„é«˜çº§èƒ½åŠ›ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ API è¯·æ±‚ä¸­ä¼ å…¥ä¸€ç»„å·¥å…·åˆ—è¡¨ï¼Œè®©æ¨¡å‹æ™ºèƒ½åœ°é€‰æ‹©å…·ä½“ä½¿ç”¨å“ªä¸ªå·¥å…·ï¼Œå¹¶åœ¨è¿”å›è¯·æ±‚ä¸­è¾“å‡ºå·¥å…·è°ƒç”¨çš„ JSON å‚æ•°ã€‚

<Callout type="info">
  å¦‚æœä½ ä¹‹å‰æ²¡æœ‰äº†è§£è¿‡ Tools Callingï¼Œ å¯ä»¥æŸ¥çœ‹ [Function Callï¼š Chat
  åº”ç”¨çš„æ’ä»¶åŸºçŸ³ä¸äº¤äº’æŠ€æœ¯çš„å˜é©é»æ˜](https://lobehub.com/zh/blog/openai-function-call) è¿™ç¯‡æ–‡ç« ã€‚
</Callout>

éšç€ç¤¾åŒºä¸­è¶Šæ¥è¶Šå¤šçš„å¤§è¯­è¨€æ¨¡å‹æ”¯æŒäº† Tool Calling èƒ½åŠ›ï¼ŒåŒæ—¶å¾—ç›Šäº LobeChat çš„ Agent Runtime æ¶æ„ï¼Œæˆ‘ä»¬å‡ ä¹å®ç°äº†æ‰€æœ‰ä¸»æµå¤§è¯­è¨€æ¨¡å‹ï¼ˆ OpenAI ã€Claude ã€Gemini ç­‰ç­‰ï¼‰çš„ Tool Calling è°ƒç”¨èƒ½åŠ›ã€‚

LobeChat çš„æ’ä»¶å®ç°åŸºäºæ¨¡å‹çš„ Tools Calling èƒ½åŠ›ï¼Œæ¨¡å‹æœ¬èº«çš„ Tool Calling èƒ½åŠ›å†³å®šæ’ä»¶è°ƒç”¨æ˜¯å¦æ­£å¸¸ã€‚ä½œä¸ºä¸Šå±‚åº”ç”¨ï¼Œæˆ‘ä»¬é’ˆå¯¹å„ä¸ªæ¨¡å‹çš„ Tool Calling åšäº†è¾ƒä¸ºå®Œå–„çš„æµ‹è¯•ï¼Œä»¥ä¾¿å¸®åŠ©æˆ‘ä»¬çš„ç”¨æˆ·äº†è§£ç°æœ‰çš„æ¨¡å‹èƒ½åŠ›ï¼Œæ›´å¥½åœ°è¿›è¡ŒæŠ‰æ‹©ã€‚

## è¯„æµ‹ä»»åŠ¡ä»‹ç»

æˆ‘ä»¬åŸºäºå®é™…çœŸå®çš„ç”¨æˆ·åœºæ™¯å‡ºå‘æ„å»ºäº†ä¸¤å¤§ç»„æµ‹è¯•ä»»åŠ¡ï¼Œç¬¬ä¸€ç»„ä¸ºç®€å•çš„è°ƒç”¨æŒ‡ä»¤ï¼ˆå¤©æ°”æŸ¥è¯¢ï¼‰ï¼Œç¬¬äºŒç»„ä¸ºå¤æ‚è°ƒç”¨æŒ‡ä»¤ï¼ˆæ–‡ç”Ÿå›¾ï¼‰ã€‚è¿™ä¸¤ç»„æŒ‡ä»¤çš„ç³»ç»Ÿæè¿°å¦‚ä¸‹ï¼š

<Tabs items={["ç®€å•æŒ‡ä»¤ï¼ˆå¤©æ°”æŸ¥è¯¢ï¼‰", "å¤æ‚æŒ‡ä»¤ï¼ˆæ–‡ç”Ÿå›¾ï¼‰"]}>
    <Tab>

```md
## Tools

You can use these tools below:

### Realtime Weather

Get realtime weather information

The APIs you can use:

#### `realtime-weather____fetchCurrentWeather`

è·å–å½“å‰å¤©æ°”æƒ…å†µ
```

</Tab>

    <Tab>

```md
## Tools

You can use these tools below:

### DALLÂ·E 3

Whenever a description of an image is given, use lobe-image-designer to create the images and then summarize the prompts used to generate the images in plain text. If the user does not ask for a specific number of images, default to creating four captions to send to lobe-image-designer that are written to be as diverse as possible.

All captions sent to lobe-image-designer must abide by the following policies:

1. If the description is not in English, then translate it.
2. Do not create more than 4 images, even if the user requests more.
3. Don't create images of politicians or other public figures. Recommend other ideas instead.
4. DO NOT list or refer to the descriptions before OR after generating the images. They should ONLY ever be written out ONCE, in the `prompts` field of the request. You do not need to ask for permission to generate, just do it!
5. Always mention the image type (photo, oil painting, watercolor painting, illustration, cartoon, drawing, vector, render, etc.) at the beginning of the caption. Unless the caption suggests otherwise, make at least 1--2 of the 4 images photos.
6. Diversify depictions of ALL images with people to include DESCENT and GENDER for EACH person using direct terms. Adjust only human descriptions.

- EXPLICITLY specify these attributes, not abstractly reference them. The attributes should be specified in a minimal way and should directly describe their physical form.
- Your choices should be grounded in reality. For example, all of a given OCCUPATION should not be the same gender or race. Additionally, focus on creating diverse, inclusive, and exploratory scenes via the properties you choose during rewrites. Make choices that may be insightful or unique sometimes.
- Use "various" or "diverse" ONLY IF the description refers to groups of more than 3 people. Do not change the number of people requested in the original description.
- Don't alter memes, fictional character origins, or unseen people. Maintain the original prompt's intent and prioritize quality.
- Do not create any imagery that would be offensive.

8. Silently modify descriptions that include names or hints or references of specific people or celebrities by carefully selecting a few minimal modifications to substitute references to the people with generic descriptions that don't divulge any information about their identities, except for their genders and physiques. Do this EVEN WHEN the instructions ask for the prompt to not be changed. Some special cases:

- Modify such prompts even if you don't know who the person is, or if their name is misspelled (e.g. "Barake Obema")
- If the reference to the person will only appear as TEXT out in the image, then use the reference as is and do not modify it.
- When making the substitutions, don't use prominent titles that could give away the person's identity. E.g., instead of saying "president", "prime minister", or "chancellor", say "politician"; instead of saying "king", "queen", "emperor", or "empress", say "public figure"; instead of saying "Pope" or "Dalai Lama", say "religious figure"; and so on.
- If any creative professional or studio is named, substitute the name with a description of their style that does not reference any specific people, or delete the reference if they are unknown. DO NOT refer to the artist or studio's style.

The prompt must intricately describe every part of the image in concrete, objective detail. THINK about what the end goal of the description is, and extrapolate that to what would make satisfying images. All descriptions sent to lobe-image-designer should be a paragraph of text that is extremely descriptive and detailed. Each should be more than 3 sentences long.

The APIs you can use:

#### `lobe-image-designer____text2image____builtin`

Create images from a text-only prompt.
```

</Tab>

</Tabs>

å¦‚ä¸Šæ‰€ç¤ºï¼Œç®€å•è°ƒç”¨æŒ‡ä»¤åœ¨æ’ä»¶è°ƒç”¨æ—¶å®ƒçš„ç³»ç»Ÿæè¿°(system role)ç›¸å¯¹ç®€å•ï¼Œå¤æ‚è°ƒç”¨æŒ‡ä»¤çš„ç³»ç»Ÿæè¿°ä¼šå¤æ‚å¾ˆå¤šã€‚è¿™ä¸¤ç»„ä¸åŒå¤æ‚åº¦çš„æŒ‡ä»¤å¯ä»¥æ¯”è¾ƒå¥½åœ°åŒºåˆ†å‡ºæ¨¡å‹å¯¹äºç³»ç»ŸæŒ‡ä»¤çš„éµå¾ªèƒ½åŠ›ï¼š

- **å¤©æ°”æŸ¥è¯¢å¯ä»¥æµ‹è¯•æ¨¡å‹çš„åŸºç¡€ Tool Calling èƒ½åŠ›ï¼Œç¡®è®¤æ¨¡å‹æ˜¯å¦å­˜åœ¨ã€Œè™šå‡å®£ä¼ ã€çš„æƒ…å†µã€‚** å°±æˆ‘ä»¬å®é™…çš„æµ‹è¯•æ¥çœ‹ï¼Œçš„ç¡®å­˜åœ¨ä¸€äº›æ¨¡å‹å·ç§°å…·æœ‰ Tools Calling èƒ½åŠ›ï¼Œä½†æ˜¯å¤„äºå®Œå…¨ä¸å¯ç”¨çš„çŠ¶æ€ï¼›
- **æ–‡ç”Ÿå›¾å¯ä»¥æµ‹è¯•æ¨¡å‹æŒ‡ä»¤è·Ÿéšèƒ½åŠ›çš„ä¸Šé™ã€‚** ä¾‹å¦‚åŸºç¡€æ¨¡å‹ï¼ˆä¾‹å¦‚ GPT-3.5ï¼‰å¯èƒ½åªèƒ½ç”Ÿæˆ 1 å¼ å›¾ç‰‡çš„ promptï¼Œè€Œé«˜çº§æ¨¡å‹ï¼ˆä¾‹å¦‚ GPT-4oï¼‰åˆ™èƒ½å¤Ÿç”Ÿæˆ 1~4 å¼ å›¾ç‰‡çš„ promptã€‚

### ç®€å•è°ƒç”¨æŒ‡ä»¤ï¼šå¤©æ°”æŸ¥è¯¢

å¤©æ°”æŸ¥è¯¢æ˜¯ Tools Calling ä¸­ä¸€ä¸ªç»å…¸çš„ä¾‹å­ã€‚

å¤©æ°”æŸ¥è¯¢æ’ä»¶é‡‡ç”¨çš„æ˜¯æˆ‘ä»¬è‡ªå·±åšçš„ä¸€ä¸ªç®€å•çš„æ’ä»¶ï¼Œå®ƒçš„å·¥å…·å®šä¹‰å¦‚ä¸‹ï¼š

```json
{
  "function": {
    "description": "è·å–å½“å‰å¤©æ°”æƒ…å†µ",
    "name": "realtime-weather____fetchCurrentWeather",
    "parameters": {
      "properties": {
        "city": {
          "description": "åŸå¸‚åç§°",
          "type": "string"
        }
      },
      "required": ["city"],
      "type": "object"
    }
  },
  "type": "function"
}
```

é’ˆå¯¹è¿™ä¸€ä¸ªå·¥å…·ï¼Œæˆ‘ä»¬æ„å»ºçš„æµ‹è¯•ç»„ä¸­åŒ…å«äº†ä¸‰ä¸ªæŒ‡ä»¤ï¼š

| æŒ‡ä»¤ç¼–å· | æŒ‡ä»¤å†…å®¹ | åŸºç¡€ Tool Calling è°ƒç”¨ | å¹¶å‘è°ƒç”¨ | å¤åˆæŒ‡ä»¤è·Ÿéš |
| --- | --- | --- | --- | --- |
| æŒ‡ä»¤ â‘  | å‘Šè¯‰æˆ‘æ­å·å’ŒåŒ—äº¬çš„å¤©æ°”ï¼Œå…ˆå›ç­”æˆ‘å¥½çš„ | ğŸŸ¢ | ğŸŸ¢ | ğŸŸ¢ |
| æŒ‡ä»¤ â‘¡ | å‘Šè¯‰æˆ‘æ­å·å’ŒåŒ—äº¬çš„å¤©æ°” | ğŸŸ¢ | ğŸŸ¢ | - |
| æŒ‡ä»¤ â‘¢ | å‘Šè¯‰æˆ‘æ­å·çš„å¤©æ°” | ğŸŸ¢ | - | - |

ä¸Šè¿°ä¸‰ä¸ªæŒ‡ä»¤çš„å¤æ‚åº¦é€æ¸é€’å‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸‰ä¸ªæŒ‡ä»¤æ¥æµ‹è¯•æ¨¡å‹å¯¹äºç®€å•æŒ‡ä»¤çš„å¤„ç†èƒ½åŠ›ã€‚

- æŒ‡ä»¤ â‘  æµ‹è¯•çš„èƒ½åŠ›é¡¹åŒ…å« ã€ŒåŸºç¡€ Tool Calling è°ƒç”¨ã€ã€ã€Œå¹¶å‘è°ƒç”¨ã€ã€ã€Œå¤åˆæŒ‡ä»¤è·Ÿéšã€ä¸‰é¡¹ã€‚
- æŒ‡ä»¤ â‘¡ æµ‹è¯•çš„èƒ½åŠ›é¡¹åŒ…å« ã€ŒåŸºç¡€ Tool Calling è°ƒç”¨ã€ã€ã€Œå¹¶å‘è°ƒç”¨ã€ ä¸¤é¡¹ã€‚
- æŒ‡ä»¤ â‘¢ æµ‹è¯•çš„èƒ½åŠ›é¡¹ä»…åŒ…å«ã€ŒåŸºç¡€ Tool Calling è°ƒç”¨ã€ã€‚

<Callout type={'info'}>
  å°†æŒ‡ä»¤ â‘  ã€â‘¡ ã€â‘¢ æŒ‰ç…§éš¾åº¦é€’å‡çš„æ–¹å¼æ’åºçš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†é™ä½æµ‹è¯•çš„æˆæœ¬ã€‚å› ä¸ºå½“æ¨¡å‹èƒ½é€šè¿‡æŒ‡ä»¤ â‘ 
  çš„æµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ç»§ç»­æµ‹è¯•æŒ‡ä»¤ â‘¡ å’ŒæŒ‡ä»¤ â‘¢ ï¼Œå¿…ç„¶èƒ½é€šè¿‡ã€‚
</Callout>

æµ‹è¯•èƒ½åŠ›é¡¹è¯¦ç»†è¯´æ˜:

<Tabs items={["å¤åˆæŒ‡ä»¤è·Ÿéš","å¹¶å‘å·¥å…·è°ƒç”¨","åŸºç¡€å·¥å…·è°ƒç”¨"]}>
  <Tab>

    æ ¹æ®æˆ‘ä»¬å®é™…çš„æ—¥å¸¸ä½¿ç”¨ï¼Œå·¥å…·è°ƒç”¨å¾€å¾€ä¼šå’Œæ™®é€šæ–‡æœ¬ç”Ÿæˆç»“åˆåœ¨ä¸€èµ·å›ç­”ã€‚ä¾‹å¦‚æ¯”è¾ƒç»å…¸çš„ Code Interpreter æ’ä»¶ï¼ŒChatGPT å¾€å¾€ä¼šå…ˆå›å¤ä¸€äº›ä»£ç ç”Ÿæˆçš„æ€è·¯ï¼Œç„¶åå†è°ƒç”¨ Code Interpreter æ’ä»¶ç”Ÿæˆä»£ç ã€‚

    è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®åœ°è¯†åˆ«å‡ºç”¨æˆ·çš„æ„å›¾ï¼Œç„¶åè°ƒç”¨å¯¹åº”çš„å·¥å…·ã€‚

    å› æ­¤ï¼Œ æŒ‡ä»¤ â‘  ä¸­çš„ã€Œå‘Šè¯‰æˆ‘æ­å·å’ŒåŒ—äº¬çš„å¤©æ°”ï¼Œå…ˆå›ç­”æˆ‘å¥½çš„ã€å°±æ˜¯ä¸€ä¸ªå¤åˆæŒ‡ä»¤è·Ÿéšçš„ä¾‹å­ã€‚å‰åŠå¥æœŸæœ›æ¨¡å‹è°ƒç”¨å¤©æ°”æŸ¥è¯¢å·¥å…·ï¼ŒååŠå¥æœŸæœ›æ¨¡å‹å›ç­”ã€Œå¥½çš„ã€ã€‚å¹¶ä¸”ç†æƒ³çš„é¡ºåºåº”è¯¥æ˜¯å…ˆå›ç­”ã€Œå¥½çš„ã€ï¼Œç„¶åå†è°ƒç”¨å¤©æ°”æŸ¥è¯¢å·¥å…·ã€‚

</Tab>
  <Tab>

    å¹¶å‘å·¥å…·è°ƒç”¨ï¼ˆParallel function callingï¼‰æ˜¯æŒ‡æ¨¡å‹èƒ½å¤ŸåŒæ—¶è°ƒç”¨å¤šä¸ªå·¥å…·ï¼Œæˆ–åŒæ—¶è°ƒç”¨ä¸€ä¸ªå·¥å…·å¤šæ¬¡ï¼Œè¿™åœ¨å¯¹è¯ä¸­å¯ä»¥å¤§å¤§é™ä½ç”¨æˆ·ç­‰å¾…çš„æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

    å¹¶å‘å·¥å…·è°ƒç”¨èƒ½åŠ›ç”± OpenAI äº 2023å¹´11æœˆç‡å…ˆæå‡ºï¼Œç›®å‰æ”¯æŒå¹¶å‘å·¥å…·è°ƒç”¨çš„æ¨¡å‹å¹¶ä¸ç®—å¤šï¼Œå±äºæ˜¯ Tools Calling çš„è¿›é˜¶èƒ½åŠ›ã€‚

    æŒ‡ä»¤ â‘¡ ä¸­çš„ã€Œå‘Šè¯‰æˆ‘æ­å·å’ŒåŒ—äº¬çš„å¤©æ°”ã€å°±æ˜¯ä¸€ä¸ªæœŸæœ›æ‰§è¡Œå¹¶å‘è°ƒç”¨çš„ä¾‹å­ã€‚ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œå•ä¸ªæ¨¡å‹çš„è¿”å›åº”è¯¥å­˜åœ¨ä¸¤ä¸ªå·¥å…·çš„è°ƒç”¨è¿”å›ã€‚

</Tab>
  <Tab>

    åŸºç¡€å·¥å…·è°ƒç”¨ä¸å¿…å†èµ˜è¿°ï¼Œè¿™æ˜¯ Tools Calling çš„åŸºç¡€èƒ½åŠ›ã€‚

    æŒ‡ä»¤ â‘¢ ä¸­çš„ã€Œå‘Šè¯‰æˆ‘æ­å·çš„å¤©æ°”ã€å°±æ˜¯æœ€åŸºæœ¬çš„å·¥å…·è°ƒç”¨çš„ä¾‹å­ã€‚

</Tab>
</Tabs>

### å¤æ‚è°ƒç”¨æŒ‡ä»¤ï¼šæ–‡ç”Ÿå›¾

æ–‡ç”Ÿå›¾çš„ Tool Calling åŸºæœ¬ç…§æ¬äº† ChatGPT Plus çš„æŒ‡ä»¤ï¼Œå®ƒçš„å¤æ‚åº¦ç›¸å¯¹è¾ƒé«˜ï¼Œå¯ä»¥æµ‹è¯•æ¨¡å‹å¯¹äºå¤æ‚æŒ‡ä»¤çš„è·Ÿéšèƒ½åŠ›ã€‚å·¥å…·å®šä¹‰å¦‚ä¸‹ï¼š

```json
{
  "function": {
    "description": "Create images from a text-only prompt.",
    "name": "lobe-image-designer____text2image____builtin",
    "parameters": {
      "properties": {
        "prompts": {
          "description": "The user's original image description, potentially modified to abide by the lobe-image-designer policies. If the user does not suggest a number of captions to create, create four of them. If creating multiple captions, make them as diverse as possible. If the user requested modifications to previous images, the captions should not simply be longer, but rather it should be refactored to integrate the suggestions into each of the captions. Generate no more than 4 images, even if the user requests more.",
          "items": {
            "type": "string"
          },
          "maxItems": 4,
          "minItems": 1,
          "type": "array"
        },
        "quality": {
          "default": "standard",
          "description": "The quality of the image that will be generated. hd creates images with finer details and greater consistency across the image.",
          "enum": ["standard", "hd"],
          "type": "string"
        },
        "seeds": {
          "description": "A list of seeds to use for each prompt. If the user asks to modify a previous image, populate this field with the seed used to generate that image from the image lobe-image-designer metadata.",
          "items": {
            "type": "integer"
          },
          "type": "array"
        },
        "size": {
          "default": "1024x1024",
          "description": "The resolution of the requested image, which can be wide, square, or tall. Use 1024x1024 (square) as the default unless the prompt suggests a wide image, 1792x1024, or a full-body portrait, in which case 1024x1792 (tall) should be used instead. Always include this parameter in the request.",
          "enum": ["1792x1024", "1024x1024", "1024x1792"],
          "type": "string"
        },
        "style": {
          "default": "vivid",
          "description": "The style of the generated images. Must be one of vivid or natural. Vivid causes the model to lean towards generating hyper-real and dramatic images. Natural causes the model to produce more natural, less hyper-real looking images.",
          "enum": ["vivid", "natural"],
          "type": "string"
        }
      },
      "required": ["prompts"],
      "type": "object"
    }
  },
  "type": "function"
}
```

é’ˆå¯¹è¿™ä¸€ä¸ªå·¥å…·ï¼Œæˆ‘ä»¬æ„å»ºçš„æµ‹è¯•ç»„ä¸­åŒ…å«äº†ä¸¤ä¸ªæŒ‡ä»¤ï¼š

| æŒ‡ä»¤ç¼–å· | æŒ‡ä»¤å†…å®¹ | æµå¼è°ƒç”¨ | å¤æ‚ Tool Calling è°ƒç”¨ | å¹¶å‘è°ƒç”¨ | å¤åˆæŒ‡ä»¤è·Ÿéš |
| --- | --- | --- | --- | --- | --- |
| æŒ‡ä»¤ â‘  | æˆ‘è¦ç”» 3 å¹…ç”»ï¼Œç¬¬ä¸€å¹…ç”»çš„ä¸»ä½“ä¸ºä¸€åªè¾¾èŠ¬å¥‡é£æ ¼çš„å°ç‹—ï¼Œç¬¬äºŒå¹…æ˜¯æ¯•åŠ ç´¢é£æ ¼çš„å¤§é›ï¼Œæœ€åä¸€å¹…æ˜¯è«å¥ˆé£æ ¼çš„ç‹®å­ã€‚æ¯ä¸€å¹…éƒ½éœ€è¦äº§å‡º 2 ä¸ª promptsã€‚è¯·å…ˆè¯´æ˜ä½ çš„æ„æ€ï¼Œç„¶åå¼€å§‹ç”Ÿæˆç›¸åº”çš„å›¾ç‰‡ã€‚ | ğŸŸ¢ | ğŸŸ¢ | ğŸŸ¢ | ğŸŸ¢ |
| æŒ‡ä»¤ â‘¡ | ç”»ä¸€åªå°ç‹— | ğŸŸ¢ | ğŸŸ¢ | - | - |

æ­¤å¤–ï¼Œç”±äºæ–‡ç”Ÿå›¾çš„ prompts çš„ç”Ÿæˆæ—¶é—´è¾ƒé•¿ï¼Œè¿™ä¸€ç»„æŒ‡ä»¤ä¹Ÿå¯ä»¥æ¸…æ™°åœ°æµ‹è¯•å‡ºæ¨¡å‹çš„ API æ˜¯å¦æ”¯æŒæµå¼ Tool Callingã€‚

## è¯„æµ‹ç»“æœ

TODO
